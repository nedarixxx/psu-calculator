# Техническое задание: PSU Calculator

## 1. Название и концепция

**Проект:** PSU Calculator (Power Supply Unit Calculator)

**Проблема:** При сборке компьютера пользователи часто ошибаются с выбором мощности блока питания. Одни переплачивают, выбирая избыточно мощный БП, другие рискуют стабильностью системы, недооценивая энергопотребление. Нет удобного инструмента для быстрого и точного расчета требуемой мощности.

**Решение:** Веб-сервис PSU Calculator позволяет пользователям составить виртуальную конфигурацию компьютера из каталога компонентов, получить автоматический расчет пикового энергопотребления и рекомендацию по выбору блока питания с учетом коэффициента надежности (1.25x).

---

## 2. Целевая аудитория и роли пользователей

### Гость
- Просмотр каталога доступных компонентов (процессоры, видеокарты, памяти и т.д.)
- Просмотр характеристик компонентов (название, потребление в Ваттах)
- Просмотр публичных сборок (если автор поделился)

### Авторизованный пользователь
- Создание собственных ПК-конфигураций ("Build")
- Добавление/удаление компонентов в сборку
- Просмотр аналитики по каждой сборке (расчет требуемой мощности БП)
- Визуализация распределения энергопотребления (круговая диаграмма)
- Сохранение сборок для последующего редактирования
- Экспорт результатов (рекомендация по БП)

### Администратор
- Управление каталогом компонентов через админ-панель
- Добавление новых категорий и компонентов
- Редактирование характеристик (название, TDP)
- Просмотр статистики (сколько пользователей создало сборок)

---

## 3. Схема данных (сущности)

### Модель 1: Category (Категория)
**Назначение:** Классификация компонентов по типам (CPU, GPU, RAM и т.д.)

**Поля:**
- `name` (CharField, max_length=100): Название категории (例: "Процессор", "Видеокарта")
- `slug` (SlugField, unique=True): URL-friendly идентификатор
- `description` (TextField, blank=True): Краткое описание категории

---

### Модель 2: Component (Компонент)
**Назначение:** Конкретная деталь ПК (RTX 4060, Intel i5-13600K и т.д.)

**Поля:**
- `name` (CharField, max_length=200): Полное название товара
- `category` (ForeignKey → Category): Привязка к категории
- `power_draw` (IntegerField): Потребление энергии в Ваттах (TDP)
- `price` (IntegerField, nullable): Средняя рыночная цена (рублей)
- `description` (TextField, blank=True): Характеристики товара
- `created_at` (DateTimeField, auto_now_add=True): Дата добавления

---

### Модель 3: Build (Сборка ПК)
**Назначение:** Пользовательская конфигурация компьютера

**Поля:**
- `title` (CharField, max_length=200): Название сборки (例: "Игровой ПК 2025")
- `user` (ForeignKey → User): Владелец сборки
- `components` (ManyToManyField → Component): Набор компонентов в сборке
- `description` (TextField, blank=True): Примечания пользователя
- `created_at` (DateTimeField, auto_now_add=True): Дата создания
- `updated_at` (DateTimeField, auto_now=True): Дата последнего изменения

**Обоснование ManyToMany:** Одна сборка содержит много компонентов, один компонент может входить в разные сборки разных пользователей.

---

## 4. Основные сценарии пользователя (User Stories)

### Сценарий 1: Создание новой сборки
1. Авторизованный пользователь переходит в раздел "Мои сборки"
2. Кликает кнопку "Создать новую сборку"
3. Заполняет форму: название ("Рабочая станция"), описание
4. Система создает пустую сборку и перенаправляет на страницу редактирования

### Сценарий 2: Добавление компонентов в сборку
1. На странице сборки пользователь видит форму "Добавить компонент"
2. В выпадающем списке выбирает компонент (например, "NVIDIA RTX 4060 Ti")
3. Кликает "Добавить"
4. Компонент появляется в таблице ниже с указанием потребления (165W)
5. Пользователь может добавить столько компонентов, сколько нужно

### Сценарий 3: Просмотр аналитики и расчет БП
1. На странице сборки отображается таблица со всеми добавленными компонентами
2. Под таблицей автоматически вычисляется:
   - **Суммарное потребление:** 165W (видеокарта) + 125W (процессор) + 15W (остальное) = 305W
   - **Рекомендуемый БП:** 305W × 1.25 = **381.25W → рекомендуется БП не менее 450W**
3. Система выводит рекомендацию в красивом блоке: "Рекомендуемая мощность БП: 450W"

### Сценарий 4: Визуализация распределения нагрузки
1. На странице сборки отображается круговая диаграмма (Pie Chart)
2. Диаграмма показывает, какой процент энергии потребляет каждая категория:
   - Видеокарты: 54%
   - Процессоры: 41%
   - Прочее: 5%
3. График генерируется на лету через Matplotlib/Plotly и передается в шаблон

### Сценарий 5: Управление сборками
1. Пользователь видит список своих сборок
2. Может отредактировать (добавить/удалить компоненты)
3. Может удалить сборку целиком
4. Может экспортировать результат (текстовый файл или PDF с рекомендацией)

---

## 5. Технический стек и интеграции

### Backend
- **Django 4.2+**: Основной веб-фреймворк
- **Python 3.10+**: Язык программирования

### Data Science & Analytics
- **Pandas**: Используется в `views.py` для создания DataFrame из компонентов сборки, расчета суммы энергопотребления по категориям
- **Matplotlib / Plotly**: Генерация круговых диаграмм (Pie Charts) распределения энергопотребления. Изображение кодируется в base64 и передается в шаблон HTML

### Frontend
- **Bootstrap 5.3**: Адаптивная верстка, компоненты (таблицы, формы, кнопки)
- **HTML5 / CSS3**: Семантическая разметка, кастомные стили

### Database
- **SQLite** (разработка)
- **PostgreSQL** (production на PythonAnywhere)

### Forms
- **Django Forms / ModelForms**: Для валидации и обработки данных на сервере

### Hosting
- **PythonAnywhere**: Бесплатный хостинг для развертывания

---

## 6. Соответствие требованиям оценки

### ✅ Критерий: Базовый критерий (Глубокая внутренняя аналитика)
Проект не требует интеграции с внешними API. Вместо этого реализована **сложная аналитика**:
- Математические расчеты (суммирование потребления, коэффициент 1.25)
- Использование **Pandas** для агрегации данных
- Генерация графиков через **Matplotlib** без статических изображений

### ✅ Критерий: Взаимосвязь моделей
- **Category ←→ Component** (ForeignKey)
- **Build ←→ Component** (ManyToManyField)
- **Build ←→ User** (ForeignKey)

Все три модели логически связаны и необходимы для функционала.

### ✅ Критерий: Запрещенные темы
Проект **НЕ является** простым CRUD-каталогом. Он содержит:
- Сложную логику расчета энергопотребления
- Визуализацию данных (графики)
- Персонализированные пользовательские сборки

---

## 7. Изменения в ходе реализации

*(Раздел будет дополняться при необходимости)*

На данный момент планируется реализовать в полном соответствии с ТЗ.
